#--------------------------------------------------------------------------------
#--------------------------------------------------------------------------------
# -----          This file runs the code for the entire project          -----
#--------------------------------------------------------------------------------
#--------------------------------------------------------------------------------


#------------------------------------------------------------------------------
# 0. Clear memory
#------------------------------------------------------------------------------

rm(list=ls())


#------------------------------------------------------------------------------
# 2. Load here package to enable finding script loading other packages 
#------------------------------------------------------------------------------

# First, define a function that checks if a package is installed. 
# If not, it installs it. Then it loads it.
package_loader <- function(pkg) {
  if (!require(pkg, character.only = TRUE)) {
    message(paste("Installing missing package:", pkg))
    install.packages(pkg, dependencies = TRUE)
    library(pkg, character.only = TRUE)
  }
}
package_loader("here")


#------------------------------------------------------------------------------
# 3. Setup
#------------------------------------------------------------------------------

source(here(scripts/setup_script.R))

#------------------------------------------------------------------------------
# 4. Options Choice & define formulas
#------------------------------------------------------------------------------

source(here("scripts/options_config_script.R"))
source(here("scripts/taylor_rule_formulas_script.R"))


#------------------------------------------------------------------------------
# 5. Data
#------------------------------------------------------------------------------

source(here("scripts/data_script.R"))


#------------------------------------------------------------------------------
# 6. Implement chosen options
#------------------------------------------------------------------------------

source(here("scripts/options_implement_script.R"))


#------------------------------------------------------------------------------
# 7. Plot raw data, and investigate properties
#------------------------------------------------------------------------------

source(here("scripts/raw_data_plot_script.R"))


#------------------------------------------------------------------------------
# 8. Investigate data properties
#------------------------------------------------------------------------------

source(here("scripts/data_properties_script.R"))


#------------------------------------------------------------------------------
# 9. Estimate Taylor Rules 
#------------------------------------------------------------------------------

source(here("scripts/taylor_estim_no_lag_script.R"))


#------------------------------------------------------------------------------
# 10. Find structural breaks
#------------------------------------------------------------------------------

source(here("scripts/struct_breaks_tests_script.R"))


#------------------------------------------------------------------------------
# 11. Estimate rolling Taylor Rule 
#------------------------------------------------------------------------------

source(here("scripts/roll_TR_script.R"))


#------------------------------------------------------------------------------
# 12. Run pseudo out-of-sample evaluation exercise and use results
#------------------------------------------------------------------------------

source(here("scripts/pseudo_out_of_sample_estimation_script.R"))
source(here("scripts/pseudo_out_of_sample_results_script.R"))


#------------------------------------------------------------------------------
# 13. Compute final actual future forecasts 
#------------------------------------------------------------------------------

source(here("scripts/final_forecast_script.R"))




#--------------------------------------------------------------------------------